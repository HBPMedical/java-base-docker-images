java-rapidminer-build:
   build: Dockerfile.BUILD
   image: hbpmip/java-rapidminer-build
   pre:
     - echo "Preparing java-rapidminer-build"
   post:
     - echo "Finished java-rapidminer-build"
     - echo "Building project..."
     - docker run -ti --rm -v ~/.m2:/root/.m2 hbpmip/java-rapidminer-build mvn -f /dist install -Dmaven.test.skip=true
     - docker run -ti --name build-cont -v ~/.m2:/root/.m2 hbpmip/java-rapidminer-build mvn -f /dist package assembly:single -Dmaven.test.skip=true
     - docker cp build-cont:/dist/target/java-rapidminer-0.0.1-jar-with-dependencies.jar ./java-rapidminer.jar
     - docker rm build-cont
   test:
     - tests/test.sh

java-rapidminer:
   build: Dockerfile
   image: hbpmip/java-rapidminer
   pre:
     - echo "Preparing java-rapidminer"
   post:
     - echo "Finished java-rapidminer"